scope:
  # definition of some nice short-cuts
  - unit-x: {type: VECTOR3, inputs: [1, 0, 0]}
  - unit-y: {type: VECTOR3, inputs: [0, 1, 0]}
  - unit-z: {type: VECTOR3, inputs: [0, 0, 1]}
  
  # definition of input transforms 
  - mug-frame:
      type: FRAME-MULTIPLICATION
      inputs:
      - type: FRAME
        translation: 
          type: VECTOR3
          inputs: [{type: INPUT, input-number: 0}, 0, 0]
        rotation:
          type: ROTATION
          axis: {type: VECTOR-REFERENCE, reference: unit-x}
          angle: 0
      - type: FRAME
        translation: 
          type: VECTOR3
          inputs: [0, {type: INPUT, input-number: 1}, 0]
        rotation:
          type: ROTATION
          axis: {type: VECTOR-REFERENCE, reference: unit-x}
          angle: 0
      - type: FRAME
        translation: 
          type: VECTOR3
          inputs: [0, 0, {type: INPUT, input-number: 2}]
        rotation:
          type: ROTATION
          axis: {type: VECTOR-REFERENCE, reference: unit-x}
          angle: 0
      - type: FRAME
        translation: {type: VECTOR3, inputs: [0, 0, 0]}
        rotation:
          type: ROTATION
          axis: {type: VECTOR-REFERENCE, reference: unit-x}
          angle: {type: INPUT, input-number: 3}
      - type: FRAME
        translation: {type: VECTOR3, inputs: [0, 0, 0]}
        rotation:
          type: ROTATION
          axis: {type: VECTOR-REFERENCE, reference: unit-y}
          angle: {type: INPUT, input-number: 4}
      - type: FRAME
        translation: {type: VECTOR3, inputs: [0, 0, 0]}
        rotation:
          type: ROTATION
          axis: {type: VECTOR-REFERENCE, reference: unit-z}
          angle: {type: INPUT, input-number: 5}
  - maker-frame:
      type: FRAME-MULTIPLICATION
      inputs:
      - type: FRAME
        translation: 
          type: VECTOR3
          inputs: [{type: INPUT, input-number: 6}, 0, 0]
        rotation:
          type: ROTATION
          axis: {type: VECTOR-REFERENCE, reference: unit-x}
          angle: 0
      - type: FRAME
        translation: 
          type: VECTOR3
          inputs: [0, {type: INPUT, input-number: 7}, 0]
        rotation:
          type: ROTATION
          axis: {type: VECTOR-REFERENCE, reference: unit-x}
          angle: 0
      - type: FRAME
        translation: 
          type: VECTOR3
          inputs: [0, 0, {type: INPUT, input-number: 8}]
        rotation:
          type: ROTATION
          axis: {type: VECTOR-REFERENCE, reference: unit-x}
          angle: 0
      - type: FRAME
        translation: {type: VECTOR3, inputs: [0, 0, 0]}
        rotation:
          type: ROTATION
          axis: {type: VECTOR-REFERENCE, reference: unit-x}
          angle: {type: INPUT, input-number: 9}
      - type: FRAME
        translation: {type: VECTOR3, inputs: [0, 0, 0]}
        rotation:
          type: ROTATION
          axis: {type: VECTOR-REFERENCE, reference: unit-y}
          angle: {type: INPUT, input-number: 10}
      - type: FRAME
        translation: {type: VECTOR3, inputs: [0, 0, 0]}
        rotation:
          type: ROTATION
          axis: {type: VECTOR-REFERENCE, reference: unit-z}
          angle: {type: INPUT, input-number: 11}

  # definition of features
  - mug-bottom: {type: ORIGIN-OF, frame: {type: FRAME-REFERENCE, reference: mug-frame}}
  - mug-top: 
      type: MULTIPLICATION
      frame: {type: FRAME-REFERENCE, reference: mug-frame}
      vector: {type: VECTOR3, inputs: [0.02, 0.02, 0.1]}
  - maker-top: {type: ORIGIN-OF, frame: {type: FRAME-REFERENCE, reference: maker-frame}}

  # expressions used in constraints 
  - mug-above-maker: 
      type: DOUBLE-SUBTRACTION
      inputs: 
        - {type: Z-COORD-OF, vector: {type: VECTOR-REFERENCE, reference: mug-bottom}}
        - {type: Z-COORD-OF, vector: {type: VECTOR-REFERENCE, reference: maker-top}}

  - mug-upright:
      type: DOUBLE-SUBTRACTION
      inputs:
        - {type: Z-COORD-OF, vector: {type: VECTOR-REFERENCE, reference: mug-top}}
        - {type: Z-COORD-OF, vector: {type: VECTOR-REFERENCE, reference: mug-bottom}}

controllable-constraints:
  - lower: -0.3
    upper: 0.3
    weight: 0.001 # mu * 1.0
    input-number: 0
  - lower: -0.3
    upper: 0.3
    weight: 0.001 # mu * 1.0
    input-number: 1 
  - lower: -0.3
    upper: 0.3
    weight:  0.001 # mu * 1.0
    input-number: 2
  - lower: -0.5
    upper: 0.5
    weight:  0.001 # mu * 1.0
    input-number: 3
  - lower: -0.5
    upper: 0.5
    weight:  0.001 # mu * 1.0
    input-number: 4 
  - lower: -0.5
    upper: 0.5
    weight:  0.001 # mu * 1.0
    input-number: 5

soft-constraints: 
  - expression: {type: DOUBLE-REFERENCE, reference: mug-above-maker}
    lower: {type: DOUBLE-SUBTRACTION, inputs: [0.3, {type: DOUBLE-REFERENCE, reference: mug-above-maker}]}
    upper: {type: DOUBLE-SUBTRACTION, inputs: [0.35, {type: DOUBLE-REFERENCE, reference: mug-above-maker}]}
    weight: 10.001 # mu + 10.0
  - expression: {type: DOUBLE-REFERENCE, reference: mug-upright}
    lower: {type: DOUBLE-SUBTRACTION, inputs: [0.02, {type: DOUBLE-REFERENCE, reference: mug-upright}]}
    upper: {type: DOUBLE-SUBTRACTION, inputs: [0.04, {type: DOUBLE-REFERENCE, reference: mug-upright}]}
    weight: 10.001 # mu + 10.0

hard-constraints: []
#  - expression: {type: DOUBLE-REFERENCE, reference: torso_lift_joint}
#    lower: {type: DOUBLE-SUBTRACTION, inputs: [0.0115, {type: DOUBLE-REFERENCE, reference: torso_lift_joint}]}
#    upper: {type: DOUBLE-SUBTRACTION, inputs: [0.325, {type: DOUBLE-REFERENCE, reference: torso_lift_joint}]}
