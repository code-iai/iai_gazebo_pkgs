<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from ./boxy_description.urdf.xacro  | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="boxy_description" xmlns:controller="http://playerstage.sourceforge.net/gazebo/xmlschema/#controller" xmlns:interface="http://playerstage.sourceforge.net/gazebo/xmlschema/#interface" xmlns:sensor="http://playerstage.sourceforge.net/gazebo/xmlschema/#sensor" xmlns:xacro="http://ros.org/wiki/xacro">
  <material name="DarkGrey">
    <color rgba="0.3 0.3 0.3 1.0"/>
  </material>
  <material name="DarkerGrey">
    <color rgba="0.15 0.15 0.15 1.0"/>
  </material>
  <material name="Black">
    <color rgba="0 0 0 1.0"/>
  </material>
  <material name="Orange">
    <color rgba="1.0 0.487 0 1.0"/>
  </material>
  <material name="UniHB-Red">
    <!--UniBremen Red is Verkehrsrot / RAL 7035 ~= RGB 193 18 28 -->
    <color rgba=".7568627 .070588 .10980392 1.0"/>
  </material>
  <material name="Silver">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material>
  <material name="Grey">
    <color rgba="0.7 0.7 0.7 1.0"/>
  </material>
  <material name="Blue">
    <color rgba="0.0 0.0 0.8 1.0"/>
  </material>
  <material name="HandGray">
    <color rgba="0.953 0.996 0.694 1.0"/>
  </material>
  <material name="SickBlue">
    <color rgba="0.3058 0.5921 0.7294 1.0"/>
  </material>

  <gazebo reference="neck_">
    <material>Gazebo/Red</material>
  </gazebo>
  <gazebo reference="base_footprint">
    <material>Gazebo/Red</material>
  </gazebo>
  <gazebo reference="triangle_">
    <material>Gazebo/Red</material>
  </gazebo>

  <gazebo reference="head_mount_gazebo_cam_frame">
    <sensor name="camera1" type="camera">
      <update_rate>0.0</update_rate>
      <camera name="head">
        <horizontal_fov>1.3962634</horizontal_fov>
        <image>
          <width>960</width>
          <height>540</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.02</near>
          <far>300</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="camera_controller">
        <alwaysOn>true</alwaysOn>
        <updateRate>0.0</updateRate>
        <cameraName>test_camera/camera1</cameraName>
        <imageTopicName>kinect2_rgb_image</imageTopicName>
        <cameraInfoTopicName>camera_info</cameraInfoTopicName>
        <frameName>head_mount_kinect2_rgb_optical_frame</frameName>
        <hackBaseline>0.07</hackBaseline>
        <distortionK1>0.0</distortionK1>
        <distortionK2>0.0</distortionK2>
        <distortionK3>0.0</distortionK3>
        <distortionT1>0.0</distortionT1>
        <distortionT2>0.0</distortionT2>
      </plugin>
    </sensor>
  </gazebo>

  <!--
     Little helper macro to define the inertia matrix needed
     for links.
     -->
  <!-- length is along the y-axis! -->
  <!--
  Author: Felix Messmer
-->
  <!-- Inertia parameters -->
  <!-- This mass might be incorrect -->
  <!-- These parameters are borrowed from the urcontrol.conf file
       but are not verified for the correct permutation.
       The permutation was guessed by looking at the UR5 parameters.
       Serious use of these parameters needs further inspection. -->
  <!-- Kinematic model -->
  <!-- Properties from urcontrol.conf -->
  <!-- Arbitrary offsets for shoulder/elbow joints -->
  <!-- measured from model -->
  <!-- measured from model -->
  <!-- link lengths used in model -->
  <!-- Property definitions e.g. constants -->
  <!--this is the diamiter of one of the aluminium (/2) pipes (20mm) = the diamiter of the piece that holds the slider (45mm) -->
  <!-- distance from the axis 0 to the first alu pipe 74 + distance between the pipes 150 + diamiter of the slider 200 /2   ( = center ) -->
  <!-- /Property definitions e.g. constants -->
  <link name="base_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.257082749974343 -0.227847593519202 0.0535404411050965"/>
      <mass value="70.0210745907357"/>
      <inertia ixx="9.06122735721955" ixy="0.0933988942518672" ixz="0.665662584048376" iyy="12.5350462868938" iyz="0.00262520723302998" izz="7.44839974564544"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!-- <mesh -->
        <!--   filename="package://iai_boxy_base/meshes/base_link.STL" /> -->
        <mesh filename="package://iai_boxy_base/meshes/base_link.dae"/>
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_boxy_base/meshes/base_link_simple.STL"/>
      </geometry>
    </collision>
  </link>
  <link name="laser_reference_front"/>
  <joint name="laser_reference_front_joint" type="fixed">
    <origin rpy="-4.1881E-15 -4.2124E-15 0.7854" xyz="0.19107 0.0506 0.1575"/>
    <parent link="base_link"/>
    <child link="laser_reference_front"/>
    <axis xyz="-0.99849 0 -0.054862"/>
  </joint>
  <link name="laser_reference_back"/>
  <joint name="laser_reference_back_joint" type="fixed">
    <origin rpy="4.9333E-15 4.5082E-15 -2.3562" xyz="-0.69357 -0.506 0.1575"/>
    <parent link="base_link"/>
    <child link="laser_reference_back"/>
    <axis xyz="-1 0 0"/>
  </joint>
  <link name="base_footprint">
    <inertial>
      <mass value="1"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.01 0.01 0.01"/>
      </geometry>
      <material name="White"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.071"/>
      <geometry>
        <box size="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <!-- JOINT to define base_footprint -->
  <joint name="base_footprint_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.36 0.25 0.16"/>
    <parent link="base_footprint"/>
    <child link="base_link"/>
  </joint>
  <!-- /JOINT for base_footprint -->
  <!-- NEW NECK ASSEMBLY -->
  <!-- mounting plate of UR3 -->
  <!-- Joint connecting the parent to our frame_in -->
  <joint name="neck_adapter_ur3_in_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.214 -0.227 1.48"/>
    <parent link="base_link"/>
    <child link="neck_adapter_ur3_frame_in"/>
  </joint>
  <!-- FIXME: replace this with the actual mesh exported by Alexis -->
  <link name="neck_adapter_ur3_frame_in">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.1 0.18 0.006"/>
      </geometry>
      <material name="red">
        <color rgba="0.8 0 0 1"/>
      </material>
    </visual>
  </link>
  <!-- joint positioning the frame_out -->
  <joint name="neck_adapter_ur3_trans_frame_out" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.003"/>
    <parent link="neck_adapter_ur3_frame_in"/>
    <child link="neck_adapter_ur3_frame_out"/>
  </joint>
  <!-- Empty link just to get the frame out -->
  <link name="neck_adapter_ur3_frame_out"/>
  <!-- The joint connecting us to the next part of the chain is in the next URDF -->
  <joint name="neck_mounting_joint" type="fixed">
    <parent link="neck_adapter_ur3_frame_out"/>
    <child link="neck_base_link"/>
    <origin rpy="0.0 0.0 -1.57079632679" xyz="0.0 0.0 0.0"/>
  </joint>
  <link name="neck_base_link">
    <visual>
      <geometry>
        <mesh filename="package://iai_ur_description/meshes/ur3/visual/base.dae"/>
      </geometry>
      <material name="LightGrey">
        <color rgba="0.7 0.7 0.7 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://iai_ur_description/meshes/ur3/collision/base.stl"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.0030531654454" ixy="0.0" ixz="0.0" iyy="0.0030531654454" iyz="0.0" izz="0.005625"/>
    </inertial>
  </link>
  <joint name="neck_shoulder_pan_joint" type="revolute">
    <parent link="neck_base_link"/>
    <child link="neck_shoulder_link"/>
    <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.1519"/>
    <axis xyz="0 0 1"/>
    <limit effort="330.0" lower="-3.14159265" upper="3.14159265" velocity="2.16"/>
    <dynamics damping="0.0" friction="0.0"/>
  </joint>
  <link name="neck_shoulder_link">
    <visual>
      <geometry>
        <mesh filename="package://iai_ur_description/meshes/ur3/visual/shoulder.dae"/>
      </geometry>
      <material name="LightGrey">
        <color rgba="0.7 0.7 0.7 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://iai_ur_description/meshes/ur3/collision/shoulder.stl"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.0080931634294" ixy="0.0" ixz="0.0" iyy="0.0080931634294" iyz="0.0" izz="0.005625"/>
    </inertial>
  </link>
  <joint name="neck_shoulder_lift_joint" type="revolute">
    <parent link="neck_shoulder_link"/>
    <child link="neck_upper_arm_link"/>
    <origin rpy="0.0 1.570796325 0.0" xyz="0.0 0.1198 0.0"/>
    <axis xyz="0 1 0"/>
    <limit effort="330.0" lower="-3.14159265" upper="3.14159265" velocity="2.16"/>
    <dynamics damping="0.0" friction="0.0"/>
  </joint>
  <link name="neck_upper_arm_link">
    <visual>
      <geometry>
        <mesh filename="package://iai_ur_description/meshes/ur3/visual/upperarm.dae"/>
      </geometry>
      <material name="LightGrey">
        <color rgba="0.7 0.7 0.7 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://iai_ur_description/meshes/ur3/collision/upperarm.stl"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="3.42"/>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.121825"/>
      <inertia ixx="0.0217284832211" ixy="0.0" ixz="0.0" iyy="0.0217284832211" iyz="0.0" izz="0.00961875"/>
    </inertial>
  </link>
  <joint name="neck_elbow_joint" type="revolute">
    <parent link="neck_upper_arm_link"/>
    <child link="neck_forearm_link"/>
    <origin rpy="0.0 0.0 0.0" xyz="0.0 -0.0925 0.24365"/>
    <axis xyz="0 1 0"/>
    <limit effort="150.0" lower="-3.14159265" upper="3.14159265" velocity="3.15"/>
    <dynamics damping="0.0" friction="0.0"/>
  </joint>
  <link name="neck_forearm_link">
    <visual>
      <geometry>
        <mesh filename="package://iai_ur_description/meshes/ur3/visual/forearm.dae"/>
      </geometry>
      <material name="LightGrey">
        <color rgba="0.7 0.7 0.7 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://iai_ur_description/meshes/ur3/collision/forearm.stl"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.26"/>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.106625"/>
      <inertia ixx="0.00654680644378" ixy="0.0" ixz="0.0" iyy="0.00654680644378" iyz="0.0" izz="0.00354375"/>
    </inertial>
  </link>
  <joint name="neck_wrist_1_joint" type="revolute">
    <parent link="neck_forearm_link"/>
    <child link="neck_wrist_1_link"/>
    <origin rpy="0.0 1.570796325 0.0" xyz="0.0 0.0 0.21325"/>
    <axis xyz="0 1 0"/>
    <limit effort="54.0" lower="-3.14159265" upper="3.14159265" velocity="3.2"/>
    <dynamics damping="0.0" friction="0.0"/>
  </joint>
  <link name="neck_wrist_1_link">
    <visual>
      <geometry>
        <mesh filename="package://iai_ur_description/meshes/ur3/visual/wrist1.dae"/>
      </geometry>
      <material name="LightGrey">
        <color rgba="0.7 0.7 0.7 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://iai_ur_description/meshes/ur3/collision/wrist1.stl"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.8"/>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.002084999166" ixy="0.0" ixz="0.0" iyy="0.002084999166" iyz="0.0" izz="0.00225"/>
    </inertial>
  </link>
  <joint name="neck_wrist_2_joint" type="revolute">
    <parent link="neck_wrist_1_link"/>
    <child link="neck_wrist_2_link"/>
    <origin rpy="0.0 0.0 0.0" xyz="0.0 0.08505 0.0"/>
    <axis xyz="0 0 1"/>
    <limit effort="54.0" lower="-3.14159265" upper="3.14159265" velocity="3.2"/>
    <dynamics damping="0.0" friction="0.0"/>
  </joint>
  <link name="neck_wrist_2_link">
    <visual>
      <geometry>
        <mesh filename="package://iai_ur_description/meshes/ur3/visual/wrist2.dae"/>
      </geometry>
      <material name="LightGrey">
        <color rgba="0.7 0.7 0.7 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://iai_ur_description/meshes/ur3/collision/wrist2.stl"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.8"/>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.002084999166" ixy="0.0" ixz="0.0" iyy="0.002084999166" iyz="0.0" izz="0.00225"/>
    </inertial>
  </link>
  <joint name="neck_wrist_3_joint" type="revolute">
    <parent link="neck_wrist_2_link"/>
    <child link="neck_wrist_3_link"/>
    <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.08535"/>
    <axis xyz="0 1 0"/>
    <limit effort="54.0" lower="-3.14159265" upper="3.14159265" velocity="3.2"/>
    <dynamics damping="0.0" friction="0.0"/>
  </joint>
  <link name="neck_wrist_3_link">
    <visual>
      <geometry>
        <mesh filename="package://iai_ur_description/meshes/ur3/visual/wrist3.dae"/>
      </geometry>
      <material name="LightGrey">
        <color rgba="0.7 0.7 0.7 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://iai_ur_description/meshes/ur3/collision/wrist3.stl"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.35"/>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.000912187135125" ixy="0.0" ixz="0.0" iyy="0.000912187135125" iyz="0.0" izz="0.000984375"/>
    </inertial>
  </link>
  <joint name="neck_ee_fixed_joint" type="fixed">
    <parent link="neck_wrist_3_link"/>
    <child link="neck_ee_link"/>
    <origin rpy="0.0 0.0 1.570796325" xyz="0.0 0.0819 0.0"/>
  </joint>
  <link name="neck_ee_link">
    <collision>
      <geometry>
        <box size="0.01 0.01 0.01"/>
      </geometry>
      <origin rpy="0 0 0" xyz="-0.01 0 0"/>
    </collision>
  </link>
  <transmission name="neck_shoulder_pan_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="neck_shoulder_pan_motor"/>
    <joint name="neck_shoulder_pan_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <transmission name="neck_shoulder_lift_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="neck_shoulder_lift_motor"/>
    <joint name="neck_shoulder_lift_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <transmission name="neck_elbow_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="neck_elbow_motor"/>
    <joint name="neck_elbow_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <transmission name="neck_wrist_1_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="neck_wrist_1_motor"/>
    <joint name="neck_wrist_1_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <transmission name="neck_wrist_2_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="neck_wrist_2_motor"/>
    <joint name="neck_wrist_2_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <transmission name="neck_wrist_3_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="neck_wrist_3_motor"/>
    <joint name="neck_wrist_3_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <!-- nothing to do here at the moment -->
  <!-- ROS base_link to UR 'Base' Coordinates transform -->
  <link name="neck_base"/>
  <joint name="neck_base_link-base_fixed_joint" type="fixed">
    <!-- NOTE: this rotation is only needed as long as base_link itself is
                 not corrected wrt the real robot (ie: rotated over 180
                 degrees)
      -->
    <origin rpy="0 0 -3.14159265" xyz="0 0 0"/>
    <parent link="neck_base_link"/>
    <child link="neck_base"/>
  </joint>
  <!-- Frame coincident with all-zeros TCP on UR controller -->
  <link name="neck_tool0"/>
  <joint name="neck_wrist_3_link-tool0_fixed_joint" type="fixed">
    <origin rpy="-1.570796325 0 0" xyz="0 0.0819 0"/>
    <parent link="neck_wrist_3_link"/>
    <child link="neck_tool0"/>
  </joint>
  <!-- The following URDF has frame_in / frame_out, so it is placed at the parent -->
  <!-- Joint connecting the parent to our frame_in -->
  <joint name="neck_adapter_iso50_kinect2_joint" type="fixed">
    <origin rpy="0 0 -1.570795" xyz="0 0 0"/>
    <parent link="neck_tool0"/>
    <child link="neck_adapter_iso50_kinect2_frame_in"/>
  </joint>
  <!-- link for the adapter plate -->
  <link name="neck_adapter_iso50_kinect2_frame_in">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_adapter_iso50_kinect2_description/meshes/adapter_iso50_kinect2.stl" scale="1 1 1"/>
      </geometry>
      <material name="Grey"/>
    </visual>
  </link>
  <!-- Empty link just to get the frame out -->
  <link name="neck_adapter_iso50_kinect2_frame_out"/>
  <!-- joint positioning the frame_out -->
  <joint name="neck_adapter_iso50_kinect2_trans_frame_out" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.020"/>
    <parent link="neck_adapter_iso50_kinect2_frame_in"/>
    <child link="neck_adapter_iso50_kinect2_frame_out"/>
    <axis xyz="0 0 0"/>
  </joint>
  <!-- /NEW NECK ASSEMBLY -->
  <!-- OLD NEW ASSEMBLY -->
  <!-- JOINT to connect the base with the pw070 -->
  <!--joint name="head_joint" type="fixed">
		<origin xyz="${head_joint_x} ${head_joint_y} ${head_joint_z}" rpy="0 0 0" />
		<parent link="base_link" />
		<child link="pw070_base_link" />
	</joint-->
  <!-- /JOINT to connect the base with the pw070 -->
  <!--xacro:include filename="$(find iai_schunk_pw070_v6)/robots/pw070_v6.URDF" /-->
  <!-- Kinect2 -->
  <!-- Pose comes from tool_H_clink in the calibration
             The quaternion was converted to RPY using python and KDL
               halcon has quat: w x y z
               kdl and tf_static_transform_publisher use: x y z w
             So take the first number from the halcon quat and put it last for KDL.
               import PyKDL as p; r2 = p.Rotation.Quaternion(-0.494547,0.491515,-0.506787,0.506955) ; r2.GetRPY()
               answer: (-1.5431199762943342, -0.0029080109443817533, -1.5676362600579434) -->
  <!-- The following kinect2_xacro defines the _kinect2_rgb_optical_frame
        And includes the fixed joint to place the kinect on the pw070  -->
  <material name="Kinect2Grey">
    <color rgba="0.15 0.15 0.15 1.0"/>
  </material>
  <!-- Joint connecting the parent to our frame_in -->
  <joint name="head_mount_kinect2_in_joint" type="fixed">
    <origin rpy="-1.570795 0 1.570795" xyz="-0.02 0.10 0.02"/>
    <parent link="neck_adapter_iso50_kinect2_frame_out"/>
    <child link="head_mount_kinect2_rgb_optical_frame"/>
  </joint>
  <link name="head_mount_kinect2_rgb_optical_frame">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!-- these meshes were exported in mm, so scale back to m -->
        <mesh filename="package://iai_kinect2_description/meshes/kinect2_origin_on_rgb_optical_frame.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="Kinect2Grey"/>
    </visual>
  </link>
  <!-- shoulder kinect -->
  <!-- ORIGINAL DATA FROM HALCON CALIBRATION:
             from: base_link to: shoulder_kinect_link
             translation: -0.135394 -0.00764754 1.54755 (xyz)
             quaternion: 0.0177781 0.202257 -0.0472198 0.978032 (xyzw) -->
  <joint name="shoulder_kinect_joint" type="fixed">
    <origin rpy="0.01708077682636155 0.4085798647123734 -0.09294704527264909" xyz="-0.135394 -0.00764754 1.54755"/>
    <parent link="base_link"/>
    <child link="shoulder_kinect_link"/>
  </joint>
  <link name="shoulder_kinect_link">
    <visual>
      <!-- NOTE: I (Georg Bartels) put these to be visually pleasing with our calibration
                    on February 11th, 2015. They are not set in stone! If the calibration
                    changes you might have to touch them again. Sorry! -->
      <origin rpy="1.57079632679 0 1.57079632679" xyz="-0.05 -0.17 -0.02"/>
      <geometry>
        <mesh filename="package://iai_boxy_description/meshes/sensors/68-04546_Kinect_Sensor--coarse.STL" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="gray">
        <color rgba="0.5 0.5 0.5 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.0 0.0 0"/>
      <geometry>
        <sphere radius="0.0005"/>
      </geometry>
    </collision>
  </link>
  <joint name="shoulder_kinect_rgb_joint" type="fixed">
    <origin rpy="0.0 0.0 0.0" xyz="0.0 -0.045 0.0"/>
    <parent link="shoulder_kinect_link"/>
    <child link="shoulder_kinect_rgb_frame"/>
  </joint>
  <link name="shoulder_kinect_rgb_frame"/>
  <joint name="shoulder_kinect_rgb_optical_joint" type="fixed">
    <origin rpy="-1.57079632679 0.0 -1.57079632679" xyz="0.0 0.0 0.0"/>
    <parent link="shoulder_kinect_rgb_frame"/>
    <child link="shoulder_kinect_rgb_optical_frame"/>
  </joint>
  <link name="shoulder_kinect_rgb_optical_frame"/>
  <joint name="shoulder_kinect_depth_joint" type="fixed">
    <origin rpy="0.0 0.0 0.0" xyz="0.0 -0.02 0.0"/>
    <parent link="shoulder_kinect_link"/>
    <child link="shoulder_kinect_depth_frame"/>
  </joint>
  <link name="shoulder_kinect_depth_frame"/>
  <joint name="shoulder_kinect_depth_optical_joint" type="fixed">
    <origin rpy="-1.57079632679 0.0 -1.57079632679" xyz="0.0 0.0 0.0"/>
    <parent link="shoulder_kinect_depth_frame"/>
    <child link="shoulder_kinect_depth_optical_frame"/>
  </joint>
  <link name="shoulder_kinect_depth_optical_frame"/>
  <!-- JOINT to connect the base with the torso -->
  <joint name="torso_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0.065 0.41"/>
    <parent link="base_link"/>
    <child link="torso_base_link"/>
  </joint>
  <!-- /JOINT to connect the base with the torso -->
  <link name="torso_base_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0307745199844149 -0.285 0.513294719377322"/>
      <mass value="3.82694041846288"/>
      <inertia ixx="0.573902290642399" ixy="-2.79383327284778E-16" ixz="1.66346332789765E-05" iyy="0.338648611077492" iyz="-1.04080029390922E-16" izz="0.239577094605918"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_boxy_torso/meshes/torso_base_link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_boxy_torso/meshes/torso_base_link_simple.STL"/>
      </geometry>
    </collision>
  </link>
  <link name="triangle_base_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.302419226632933 -0.181352787411384 -0.0325004871109191"/>
      <mass value="7.36699467665114"/>
      <inertia ixx="0.145376830313475" ixy="0.00013303151578814" ixz="4.5364480793564E-05" iyy="0.280518816650801" iyz="-0.00910948982082533" izz="0.330070759835274"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_boxy_torso/meshes/triangle_base_link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_boxy_torso/meshes/triangle_base_link.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="triangle_base_joint" type="prismatic">
    <!-- Values for the old xtion -->
    <!--origin
      xyz="0.0674958675029617 0.10311858113734 0.915114291670046"
      rpy="4.7298 6.267 1.5685260" /-->
    <!-- Output of the hand/eye calibration baserobot_H_basearm-->
    <origin rpy="4.70695928 6.28217403836 1.56327975371" xyz="0.0786889663592487 0.0986351579738104 0.906352096493862"/>
    <parent link="base_link"/>
    <child link="triangle_base_link"/>
    <axis xyz="0 -1 0"/>
    <limit effort="0" lower="-0.586" upper="0" velocity="0.02"/>
    <calibration rising="0.0"/>
  </joint>
  <transmission name="triangle_base_transmission" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="triangle_base_motor"/>
    <joint name="triangle_base_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <link name="triangle_left_arm_link"/>
  <joint name="triangle_left_arm_joint" type="fixed">
    <origin rpy="2.61799387796333 -1.5707963267949 0" xyz="-0.239507442352261 -0.181209704131733 -0.137000000000002"/>
    <parent link="triangle_base_link"/>
    <child link="triangle_left_arm_link"/>
    <axis xyz="0 0 0"/>
  </joint>
  <link name="triangle_right_arm_link"/>
  <joint name="triangle_right_arm_joint" type="fixed">
    <origin rpy="2.61799387801966 1.5707963267949 0" xyz="-0.365488160465715 -0.181209539931436 -0.137"/>
    <parent link="triangle_base_link"/>
    <child link="triangle_right_arm_link"/>
    <axis xyz="0 0 0"/>
  </joint>
  <!--FIXME: triangle_left_arm_link should be rotated, and not the origin of the arm (which right now is calib_left_arm_base_link -->
  <joint name="triangle_left_arm_link_left_arm_base_joint" type="fixed">
    <origin rpy="0 0 1.047198" xyz="0 0 0"/>
    <parent link="triangle_left_arm_link"/>
    <child link="calib_left_arm_base_link"/>
  </joint>
  <link name="calib_left_arm_base_link">
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0 0 0.055"/>
      <inertia ixx="0.00381666666667" ixy="0" ixz="0" iyy="0.0036" iyz="0" izz="0.00381666666667"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!-- for each mesh we have two versions, one Collada file with normals and colors, and one simpler STL. The collada file is in cm, and the STL in meters -->
        <mesh filename="package://iai_kuka_lwr4_description/meshes/arm_base.dae" scale="1 1 1"/>
        <!--mesh filename="package://iai_kuka_lwr4_description/meshes/arm_base.stl" scale="1 1 1"-->
      </geometry>
      <material name="UniHB-Red"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_base_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="calib_left_arm_base_link">
    <material value="Gazebo/Red"/>
  </gazebo>
  <joint name="left_arm_0_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0.11"/>
    <axis xyz="0 0 1"/>
    <limit effort="204" lower="-2.61799387799" upper="2.61799387799" velocity="1.91986217719"/>
    <safety_controller k_position="100" k_velocity="2" soft_lower_limit="-2.58308729295" soft_upper_limit="2.58308729295"/>
    <dynamics damping="0.1"/>
    <calibration rising="0.0"/>
    <parent link="calib_left_arm_base_link"/>
    <child link="left_arm_1_link"/>
  </joint>
  <link name="left_arm_1_link">
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0 0 0.130"/>
      <inertia ixx="0.0136666666667" ixy="0" ixz="0" iyy="0.003" iyz="0" izz="0.0118666666667"/>
    </inertial>
    <collision>
      <origin rpy="0 0 3.14159265359" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_segment_a_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="left_arm_1_link">
    <material value="Gazebo/Red"/>
  </gazebo>
  <transmission name="left_arm_0_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="left_arm_0_motor"/>
    <joint name="left_arm_0_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <joint name="left_arm_1_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0.20"/>
    <axis xyz="0 -1 0"/>
    <limit effort="306" lower="-1.86750229963" upper="1.86750229963" velocity="1.91986217719"/>
    <safety_controller k_position="100" k_velocity="2" soft_lower_limit="-1.83259571459" soft_upper_limit="1.83259571459"/>
    <dynamics damping="0.1"/>
    <calibration rising="0.0"/>
    <parent link="left_arm_1_link"/>
    <child link="left_arm_2_link"/>
  </joint>
  <link name="left_arm_2_link">
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0 0.06 0.07"/>
      <inertia ixx="0.0136666666667" ixy="0" ixz="0" iyy="0.003" iyz="0" izz="0.0118666666667"/>
    </inertial>
    <collision>
      <origin rpy="3.14159265359 0 3.14159265359" xyz="0 0 0.2"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_segment_b_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="left_arm_2_link">
    <material value="Gazebo/Red"/>
  </gazebo>
  <transmission name="left_arm_1_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="left_arm_1_motor"/>
    <joint name="left_arm_1_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <joint name="left_arm_2_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0.20"/>
    <axis xyz="0 0 1"/>
    <limit effort="204" lower="-2.61799387799" upper="2.61799387799" velocity="2.26892802759"/>
    <safety_controller k_position="100" k_velocity="2" soft_lower_limit="-2.58308729295" soft_upper_limit="2.58308729295"/>
    <dynamics damping="0.1"/>
    <calibration rising="0.0"/>
    <parent link="left_arm_2_link"/>
    <child link="left_arm_3_link"/>
  </joint>
  <link name="left_arm_3_link">
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0 0.06 0.130"/>
      <inertia ixx="0.0136666666667" ixy="0" ixz="0" iyy="0.003" iyz="0" izz="0.0118666666667"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_segment_a_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="left_arm_3_link">
    <material value="Gazebo/Red"/>
  </gazebo>
  <transmission name="left_arm_2_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="left_arm_2_motor"/>
    <joint name="left_arm_2_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <joint name="left_arm_3_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0.20"/>
    <axis xyz="0 1 0"/>
    <limit effort="306" lower="-1.86750229963" upper="1.86750229963" velocity="2.26892802759"/>
    <safety_controller k_position="100" k_velocity="2" soft_lower_limit="-1.83259571459" soft_upper_limit="1.83259571459"/>
    <dynamics damping="0.1"/>
    <calibration rising="0.0"/>
    <parent link="left_arm_3_link"/>
    <child link="left_arm_4_link"/>
  </joint>
  <link name="left_arm_4_link">
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0 -0.06 0.07"/>
      <inertia ixx="0.0136666666667" ixy="0" ixz="0" iyy="0.003" iyz="0" izz="0.0118666666667"/>
    </inertial>
    <collision>
      <origin rpy="0 3.14159265359 3.14159265359" xyz="0 0 0.2"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_segment_b_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="left_arm_4_link">
    <material value="Gazebo/Red"/>
  </gazebo>
  <transmission name="left_arm_3_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="left_arm_3_motor"/>
    <joint name="left_arm_3_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <joint name="left_arm_4_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0.20"/>
    <axis xyz="0 0 1"/>
    <limit effort="204" lower="-2.61799387799" upper="2.61799387799" velocity="2.26892802759"/>
    <safety_controller k_position="100" k_velocity="2" soft_lower_limit="-2.58308729295" soft_upper_limit="2.58308729295"/>
    <dynamics damping="0.1"/>
    <calibration rising="0.0"/>
    <parent link="left_arm_4_link"/>
    <child link="left_arm_5_link"/>
  </joint>
  <link name="left_arm_5_link">
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0 0 0.124"/>
      <inertia ixx="0.0126506666667" ixy="0" ixz="0" iyy="0.003" iyz="0" izz="0.0108506666667"/>
    </inertial>
    <collision>
      <origin rpy="0 0 3.14159265359" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_segment_last_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="left_arm_5_link">
    <material value="Gazebo/Red"/>
  </gazebo>
  <transmission name="left_arm_4_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="left_arm_4_motor"/>
    <joint name="left_arm_4_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <joint name="left_arm_5_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0.19"/>
    <axis xyz="0 -1 0"/>
    <limit effort="306" lower="-2.00712863979" upper="2.00712863979" velocity="3.14159265359"/>
    <safety_controller k_position="100" k_velocity="2" soft_lower_limit="-1.97222205475" soft_upper_limit="1.97222205475"/>
    <dynamics damping="0.1"/>
    <calibration rising="0.0"/>
    <parent link="left_arm_5_link"/>
    <child link="left_arm_6_link"/>
  </joint>
  <link name="left_arm_6_link">
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0 0 0.0625"/>
      <inertia ixx="0.00520833333333" ixy="0" ixz="0" iyy="0.00520833333333" iyz="0" izz="0.00520833333333"/>
    </inertial>
    <collision>
      <origin rpy="0 0 3.14159265359" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_wrist_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="left_arm_6_link">
    <material value="Gazebo/Red"/>
  </gazebo>
  <transmission name="left_arm_5_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="left_arm_5_motor"/>
    <joint name="left_arm_5_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <joint name="left_arm_6_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="204" lower="-2.61799387799" upper="2.61799387799" velocity="3.14159265359"/>
    <safety_controller k_position="100" k_velocity="2" soft_lower_limit="-2.58308729295" soft_upper_limit="2.58308729295"/>
    <dynamics damping="0.1"/>
    <calibration rising="0.0"/>
    <parent link="left_arm_6_link"/>
    <child link="left_arm_7_link"/>
  </joint>
  <link name="left_arm_7_link">
    <inertial>
      <mass value="2.0"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.333333333333" ixy="0" ixz="0" iyy="0.333333333333" iyz="0" izz="0.333333333333"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.078"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_flanche_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="left_arm_7_link">
    <material value="Gazebo/Red"/>
  </gazebo>
  <transmission name="left_arm_6_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="left_arm_6_motor"/>
    <joint name="left_arm_6_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <!--arm_7_link has the same pose as the TCP defined in the DLR Beasty controller:
       Center of the potato, with z-coming out towards the flange, and y going towards joint #6 -->
  <joint name="left_arm_flange_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.078"/>
    <parent link="left_arm_7_link"/>
    <child link="left_arm_flange_link"/>
  </joint>
  <link name="left_arm_flange_link">
    <inertial>
      <mass value="0.5"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.0833333333333" ixy="0" ixz="0" iyy="0.0833333333333" iyz="0" izz="0.0833333333333"/>
    </inertial>
  </link>
  <!-- Many Kuka LWR4s are equipped with a little plate to let the cables go out sideways -->
  <joint name="left_arm_cabling_adaptor_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.01"/>
    <!-- This places the link at the end of the plate (frame_out) -->
    <parent link="left_arm_flange_link"/>
    <child link="left_arm_cabling_adaptor_link"/>
  </joint>
  <link name="left_arm_cabling_adaptor_link">
  </link>
  <!-- joint name="${name}_arm_hand_fixed_joint" type="fixed">
      <origin xyz="${-right * 0.075} -0.075 -0.016"
              rpy="${0.5*right*M_PI} 0 ${(1.5 + 0.25*right)*M_PI}"/>
      <parent link="${name}_arm_7_link"/>
      <child link="${name}_arm_hand_link"/>
    </joint>

    <link name="${name}_arm_hand_link" / -->
  <joint name="left_gripper_anterior_gripper_joint" type="fixed">
    <origin rpy="0 0 0.78539816339" xyz="0 0 0"/>
    <parent link="left_arm_cabling_adaptor_link"/>
    <child link="left_gripper_base_link"/>
  </joint>
  <!-- BASE LINK -->
  <link name="left_gripper_base_link">
    <inertial>
      <mass value="0.25"/>
      <origin xyz="0 0 0"/>
      <!--inertia ixx="1.0" ixy="0.0" ixz="0.0"
               iyy="100.0" iyz="0.0"
               izz="1.0" /-->
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0.0 0 0"/>
      <geometry>
        <!--box size="0.146 0.05 0.0735"/-->
        <mesh filename="package://iai_wsg_50_description/meshes/WSG50_110.stl" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="left_gripper_base_link">
    <material>Gazebo/Red</material>
    <turnGravityOff>false</turnGravityOff>
  </gazebo>
  <!-- GRIPPER LEFT -->
  <joint name="left_gripper_base_gripper_left_joint" type="prismatic">
    <limit effort="1.0" lower="-0.055" upper="-0.0027" velocity="0.42"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <!--origin xyz="-0.0067 0 0.049" rpy="0 0 0" /-->
    <parent link="left_gripper_base_link"/>
    <child link="left_gripper_gripper_left_link"/>
    <dynamics damping="100" friction="100"/>
    <axis xyz="1 0 0"/>
    <!-- <limit effort="100" velocity="100"/> -->
  </joint>
  <transmission name="left_gripper_base_trans_left" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="left_gripper_base_motor_left"/>
    <joint name="left_gripper_base_gripper_left_joint"/>
    <mechanicalReduction>1</mechanicalReduction>
    <motorTorqueConstant>1</motorTorqueConstant>
  </transmission>
  <link name="left_gripper_gripper_left_link">
    <inertial>
      <mass value="0.1"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!--box size="0.0175 0.03 0.024"/-->
        <mesh filename="package://iai_wsg_50_description/meshes/GUIDE_WSG50_110.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <contact_coefficients kd="1.0" kp="1000.0" mu="0"/>
  </link>
  <gazebo reference="left_gripper_gripper_left_link">
    <material>Gazebo/Red</material>
    <turnGravityOff>false</turnGravityOff>
  </gazebo>
  <!-- LEFT FINGER -->
  <joint name="left_gripper_guide_joint_finger_left" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.023"/>
    <parent link="left_gripper_gripper_left_link"/>
    <child link="left_gripper_finger_left_link"/>
    <dynamics damping="100" friction="100"/>
    <axis xyz="1 0 0"/>
    <!-- <limit effort="100" velocity="100"/> -->
  </joint>
  <link name="left_gripper_finger_left_link">
    <inertial>
      <mass value="0.1"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_wsg_50_description/meshes/WSG-FMF.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <contact_coefficients kd="1.0" kp="1000.0" mu="0"/>
  </link>
  <gazebo reference="left_gripper_finger_left">
    <material>Gazebo/Red</material>
    <turnGravityOff>false</turnGravityOff>
  </gazebo>
  <!-- GRIPPER RIGHT -->
  <joint name="left_gripper_base_gripper_right_joint" type="prismatic">
    <limit effort="1.0" lower="0.0027" upper="0.055" velocity="0.42"/>
    <origin rpy="0 0 3.14159" xyz="0 0 0"/>
    <parent link="left_gripper_base_link"/>
    <child link="left_gripper_gripper_right_link"/>
    <axis xyz="-1 0 0"/>
    <dynamics damping="100" friction="100"/>
    <!-- <limit effort="100" velocity="100"/>-->
  </joint>
  <transmission name="left_gripper_base_trans_right" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="left_gripper_base_motor_right"/>
    <joint name="left_gripper_base_gripper_right_joint"/>
    <mechanicalReduction>1</mechanicalReduction>
    <motorTorqueConstant>1</motorTorqueConstant>
  </transmission>
  <link name="left_gripper_gripper_right_link">
    <inertial>
      <mass value="0.1"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!--box size="0.0175 0.03 0.024"/-->
        <mesh filename="package://iai_wsg_50_description/meshes/GUIDE_WSG50_110.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <contact_coefficients kd="1.0" kp="1000.0" mu="0"/>
  </link>
  <gazebo reference="left_gripper_gripper_right_link">
    <material>Gazebo/Red</material>
    <turnGravityOff>false</turnGravityOff>
  </gazebo>

  <!-- RIGHT FINGER -->
  <joint name="left_gripper_guide_joint_finger_right" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.023"/>
    <parent link="left_gripper_gripper_right_link"/>
    <child link="left_gripper_finger_right_link"/>
  </joint>
  <link name="left_gripper_finger_right_link">
    <inertial>
      <mass value="0.1"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_wsg_50_description/meshes/WSG-FMF.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <contact_coefficients kd="1.0" kp="1000.0" mu="0"/>
  </link>
  <gazebo reference="left_gripper_finger_right">
    <material>Gazebo/Red</material>
    <turnGravityOff>false</turnGravityOff>
  </gazebo>
  <link name="left_gripper_tool_frame"/>
  <joint name="left_gripper_tool_frame_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.154"/>
    <parent link="left_gripper_base_link"/>
    <child link="left_gripper_tool_frame"/>
  </joint>
  <!--This is a 60deg rotation to calib_right_arm_base_link -->
  <joint name="triangle_right_arm_link_right_arm_base_joint" type="fixed">
    <origin rpy="0 0 -1.047198" xyz="0 0 0"/>
    <parent link="triangle_right_arm_link"/>
    <child link="calib_right_arm_base_link"/>
  </joint>
  <link name="calib_right_arm_base_link">
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0 0 0.055"/>
      <inertia ixx="0.00381666666667" ixy="0" ixz="0" iyy="0.0036" iyz="0" izz="0.00381666666667"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!-- for each mesh we have two versions, one Collada file with normals and colors, and one simpler STL. The collada file is in cm, and the STL in meters -->
        <mesh filename="package://iai_kuka_lwr4_description/meshes/arm_base.dae" scale="1 1 1"/>
        <!--mesh filename="package://iai_kuka_lwr4_description/meshes/arm_base.stl" scale="1 1 1"-->
      </geometry>
      <material name="UniHB-Red"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_base_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="calib_right_arm_base_link">
    <material value="Gazebo/Red"/>
  </gazebo>
  <joint name="right_arm_0_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0.11"/>
    <axis xyz="0 0 1"/>
    <limit effort="204" lower="-2.61799387799" upper="2.61799387799" velocity="1.91986217719"/>
    <safety_controller k_position="100" k_velocity="2" soft_lower_limit="-2.58308729295" soft_upper_limit="2.58308729295"/>
    <dynamics damping="0.1"/>
    <calibration rising="0.0"/>
    <parent link="calib_right_arm_base_link"/>
    <child link="right_arm_1_link"/>
  </joint>
  <link name="right_arm_1_link">
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0 0 0.130"/>
      <inertia ixx="0.0136666666667" ixy="0" ixz="0" iyy="0.003" iyz="0" izz="0.0118666666667"/>
    </inertial>
    <visual>
      <origin rpy="0 0 3.14159265359" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/arm_segment_a.dae" scale="1 1 1"/>
        <!--mesh filename="package://iai_kuka_lwr4_description/meshes/arm_segment_a.stl" scale="1 1 1"/-->
      </geometry>
      <material name="UniHB-Red"/>
    </visual>
    <collision>
      <origin rpy="0 0 3.14159265359" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_segment_a_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="right_arm_1_link">
    <material value="Gazebo/Red"/>
  </gazebo>
  <transmission name="right_arm_0_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="right_arm_0_motor"/>
    <joint name="right_arm_0_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <joint name="right_arm_1_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0.20"/>
    <axis xyz="0 -1 0"/>
    <limit effort="306" lower="-1.86750229963" upper="1.86750229963" velocity="1.91986217719"/>
    <safety_controller k_position="100" k_velocity="2" soft_lower_limit="-1.83259571459" soft_upper_limit="1.83259571459"/>
    <dynamics damping="0.1"/>
    <calibration rising="0.0"/>
    <parent link="right_arm_1_link"/>
    <child link="right_arm_2_link"/>
  </joint>
  <link name="right_arm_2_link">
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0 0.06 0.07"/>
      <inertia ixx="0.0136666666667" ixy="0" ixz="0" iyy="0.003" iyz="0" izz="0.0118666666667"/>
    </inertial>
    <visual>
      <origin rpy="3.14159265359 0 3.14159265359" xyz="0 0 0.2"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/arm_segment_b.dae" scale="1 1 1"/>
        <!--mesh filename="package://iai_kuka_lwr4_description/meshes/arm_segment_b.stl" scale="1 1 1"/-->
      </geometry>
      <material name="UniHB-Red"/>
    </visual>
    <collision>
      <origin rpy="3.14159265359 0 3.14159265359" xyz="0 0 0.2"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_segment_b_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="right_arm_2_link">
    <material value="Gazebo/Red"/>
  </gazebo>
  <transmission name="right_arm_1_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="right_arm_1_motor"/>
    <joint name="right_arm_1_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <joint name="right_arm_2_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0.20"/>
    <axis xyz="0 0 1"/>
    <limit effort="204" lower="-2.61799387799" upper="2.61799387799" velocity="2.26892802759"/>
    <safety_controller k_position="100" k_velocity="2" soft_lower_limit="-2.58308729295" soft_upper_limit="2.58308729295"/>
    <dynamics damping="0.1"/>
    <calibration rising="0.0"/>
    <parent link="right_arm_2_link"/>
    <child link="right_arm_3_link"/>
  </joint>
  <link name="right_arm_3_link">
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0 0.06 0.130"/>
      <inertia ixx="0.0136666666667" ixy="0" ixz="0" iyy="0.003" iyz="0" izz="0.0118666666667"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/arm_segment_a.dae" scale="1 1 1"/>
        <!--mesh filename="package://iai_kuka_lwr4_description/meshes/arm_segment_a.stl" scale="1 1 1"/-->
      </geometry>
      <material name="UniHB-Red"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_segment_a_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="right_arm_3_link">
    <material value="Gazebo/Red"/>
  </gazebo>
  <transmission name="right_arm_2_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="right_arm_2_motor"/>
    <joint name="right_arm_2_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <joint name="right_arm_3_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0.20"/>
    <axis xyz="0 1 0"/>
    <limit effort="306" lower="-1.86750229963" upper="1.86750229963" velocity="2.26892802759"/>
    <safety_controller k_position="100" k_velocity="2" soft_lower_limit="-1.83259571459" soft_upper_limit="1.83259571459"/>
    <dynamics damping="0.1"/>
    <calibration rising="0.0"/>
    <parent link="right_arm_3_link"/>
    <child link="right_arm_4_link"/>
  </joint>
  <link name="right_arm_4_link">
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0 -0.06 0.07"/>
      <inertia ixx="0.0136666666667" ixy="0" ixz="0" iyy="0.003" iyz="0" izz="0.0118666666667"/>
    </inertial>
    <visual>
      <origin rpy="0 3.14159265359 3.14159265359" xyz="0 0 0.2"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/arm_segment_b.dae" scale="1 1 1"/>
        <!--mesh filename="package://iai_kuka_lwr4_description/meshes/arm_segment_b.stl" scale="1 1 1"/-->
      </geometry>
      <material name="UniHB-Red"/>
    </visual>
    <collision>
      <origin rpy="0 3.14159265359 3.14159265359" xyz="0 0 0.2"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_segment_b_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="right_arm_4_link">
    <material value="Gazebo/Red"/>
  </gazebo>
  <transmission name="right_arm_3_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="right_arm_3_motor"/>
    <joint name="right_arm_3_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <joint name="right_arm_4_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0.20"/>
    <axis xyz="0 0 1"/>
    <limit effort="204" lower="-2.61799387799" upper="2.61799387799" velocity="2.26892802759"/>
    <safety_controller k_position="100" k_velocity="2" soft_lower_limit="-2.58308729295" soft_upper_limit="2.58308729295"/>
    <dynamics damping="0.1"/>
    <calibration rising="0.0"/>
    <parent link="right_arm_4_link"/>
    <child link="right_arm_5_link"/>
  </joint>
  <link name="right_arm_5_link">
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0 0 0.124"/>
      <inertia ixx="0.0126506666667" ixy="0" ixz="0" iyy="0.003" iyz="0" izz="0.0108506666667"/>
    </inertial>
    <visual>
      <origin rpy="0 0 3.14159265359" xyz="0 0 0"/>
      <geometry name="right_arm_5_geom">
        <mesh filename="package://iai_kuka_lwr4_description/meshes/arm_segment_last.dae" scale="1 1 1"/>
        <!--mesh filename="package://iai_kuka_lwr4_description/meshes/arm_segment_last.stl" scale="1 1 1"/-->
      </geometry>
      <material name="UniHB-Red"/>
    </visual>
    <collision>
      <origin rpy="0 0 3.14159265359" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_segment_last_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="right_arm_5_link">
    <material value="Gazebo/Red"/>
  </gazebo>
  <transmission name="right_arm_4_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="right_arm_4_motor"/>
    <joint name="right_arm_4_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <joint name="right_arm_5_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0.19"/>
    <axis xyz="0 -1 0"/>
    <limit effort="306" lower="-2.00712863979" upper="2.00712863979" velocity="3.14159265359"/>
    <safety_controller k_position="100" k_velocity="2" soft_lower_limit="-1.97222205475" soft_upper_limit="1.97222205475"/>
    <dynamics damping="0.1"/>
    <calibration rising="0.0"/>
    <parent link="right_arm_5_link"/>
    <child link="right_arm_6_link"/>
  </joint>
  <link name="right_arm_6_link">
    <inertial>
      <mass value="2.0"/>
      <origin rpy="0 0 0" xyz="0 0 0.0625"/>
      <inertia ixx="0.00520833333333" ixy="0" ixz="0" iyy="0.00520833333333" iyz="0" izz="0.00520833333333"/>
    </inertial>
    <visual>
      <origin rpy="0 0 3.14159265359" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/arm_wrist.dae" scale="1 1 1"/>
        <!--mesh filename="package://iai_kuka_lwr4_description/meshes/arm_wrist.stl" scale="1 1 1"/-->
      </geometry>
      <material name="Grey"/>
    </visual>
    <collision>
      <origin rpy="0 0 3.14159265359" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_wrist_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="right_arm_6_link">
    <material value="Gazebo/Red"/>
  </gazebo>
  <transmission name="right_arm_5_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="right_arm_5_motor"/>
    <joint name="right_arm_5_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <joint name="right_arm_6_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="204" lower="-2.61799387799" upper="2.61799387799" velocity="3.14159265359"/>
    <safety_controller k_position="100" k_velocity="2" soft_lower_limit="-2.58308729295" soft_upper_limit="2.58308729295"/>
    <dynamics damping="0.1"/>
    <calibration rising="0.0"/>
    <parent link="right_arm_6_link"/>
    <child link="right_arm_7_link"/>
  </joint>
  <link name="right_arm_7_link">
    <inertial>
      <mass value="2.0"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.333333333333" ixy="0" ixz="0" iyy="0.333333333333" iyz="0" izz="0.333333333333"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0.078"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/arm_flanche.dae" scale="1 1 1"/>
        <!--mesh filename="package://iai_kuka_lwr4_description/meshes/arm_flanche.stl" scale="1 1 1"/-->
      </geometry>
      <material name="Black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.078"/>
      <geometry>
        <mesh filename="package://iai_kuka_lwr4_description/meshes/convex/arm_flanche_convex.stl"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="right_arm_7_link">
    <material value="Gazebo/Blue"/>
  </gazebo>
  <transmission name="right_arm_6_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="right_arm_6_motor"/>
    <joint name="right_arm_6_joint"/>
    <mechanicalReduction>1.0</mechanicalReduction>
  </transmission>
  <!--arm_7_link has the same pose as the TCP defined in the DLR Beasty controller:
       Center of the potato, with z-coming out towards the flange, and y going towards joint #6 -->
  <joint name="right_arm_flange_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.078"/>
    <parent link="right_arm_7_link"/>
    <child link="right_arm_flange_link"/>
  </joint>
  <link name="right_arm_flange_link">
    <inertial>
      <mass value="0.5"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.0833333333333" ixy="0" ixz="0" iyy="0.0833333333333" iyz="0" izz="0.0833333333333"/>
    </inertial>
  </link>
  <!-- Many Kuka LWR4s are equipped with a little plate to let the cables go out sideways -->
  <joint name="right_arm_cabling_adaptor_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.01"/>
    <!-- This places the link at the end of the plate (frame_out) -->
    <parent link="right_arm_flange_link"/>
    <child link="right_arm_cabling_adaptor_link"/>
  </joint>
  <link name="right_arm_cabling_adaptor_link">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 -0.005"/>
      <!-- The cylinder is placed at the center -->
      <geometry>
        <cylinder length="0.01" radius="0.0315"/>
      </geometry>
      <material name="Black"/>
    </visual>
  </link>
  <!-- joint name="${name}_arm_hand_fixed_joint" type="fixed">
      <origin xyz="${-right * 0.075} -0.075 -0.016"
              rpy="${0.5*right*M_PI} 0 ${(1.5 + 0.25*right)*M_PI}"/>
      <parent link="${name}_arm_7_link"/>
      <child link="${name}_arm_hand_link"/>
    </joint>

    <link name="${name}_arm_hand_link" / -->
  <!-- The following URDFs have frame_in / frame_out, so they are simply placed at their parent -->
  <!-- Joint connecting the parent to our frame_in -->
  <joint name="right_arm_adapter_iso50_kms40_joint" type="fixed">
    <origin rpy="0 0 3.14159265359" xyz="0 0 0"/>
    <parent link="right_arm_cabling_adaptor_link"/>
    <child link="right_arm_adapter_iso50_kms40_frame_in"/>
  </joint>
  <!-- link for the adapter plate -->
  <link name="right_arm_adapter_iso50_kms40_frame_in">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_kms_40_description/meshes/adapter_plate_iso50_kms40_weiss.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="Grey"/>
    </visual>
  </link>
  <!-- Empty link just to get the frame out -->
  <link name="right_arm_adapter_iso50_kms40_frame_out"/>
  <!-- joint positioning the frame_out -->
  <joint name="right_arm_adapter_iso50_kms40_trans_frame_out" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.016"/>
    <parent link="right_arm_adapter_iso50_kms40_frame_in"/>
    <child link="right_arm_adapter_iso50_kms40_frame_out"/>
    <axis xyz="0 0 0"/>
  </joint>
  <!-- Now joint connecting the actual kms40 sensor -->
  <joint name="right_arm_kms40_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="right_arm_adapter_iso50_kms40_frame_out"/>
    <child link="right_arm_kms40_frame_in"/>
  </joint>
  <!-- Link for the kms40 sensor-->
  <link name="right_arm_kms40_frame_in">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_kms_40_description/meshes/kms40_simple.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="Grey"/>
    </visual>
  </link>
  <!-- Empty link just to get the frame out -->
  <!-- This is also the reference frame for the force/torque data -->
  <link name="right_arm_kms40_frame_out"/>
  <!-- joint positioning the frame_out -->
  <joint name="right_arm_kms40_trans_frame_out" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.027"/>
    <parent link="right_arm_kms40_frame_in"/>
    <child link="right_arm_kms40_frame_out"/>
    <axis xyz="0 0 0"/>
  </joint>
  <!-- Joint connecting the parent to our frame_in -->
  <joint name="right_arm_adapter_kms40_fwk050_in_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="right_arm_kms40_frame_out"/>
    <child link="right_arm_adapter_kms40_fwk050_frame_in"/>
  </joint>
  <link name="right_arm_adapter_kms40_fwk050_frame_in">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!-- these meshes were exported in mm, so scale back to m -->
        <mesh filename="package://iai_adapters_description/meshes/adapter_kms40_fwk050.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="Grey"/>
    </visual>
  </link>
  <!-- Empty link just to get the frame out -->
  <link name="right_arm_adapter_kms40_fwk050_frame_out"/>
  <!-- joint positioning the frame_out -->
  <joint name="right_arm_adapter_kms40_fwk050_trans_frame_out" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.01"/>
    <parent link="right_arm_adapter_kms40_fwk050_frame_in"/>
    <child link="right_arm_adapter_kms40_fwk050_frame_out"/>
    <axis xyz="0 0 0"/>
  </joint>
  <!-- The joint connecting us to the next part of the chain is in the next URDF -->
  <!-- Joint connecting the parent to our frame_in -->
  <joint name="right_arm_fwk_fwa_050_in_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="right_arm_adapter_kms40_fwk050_frame_out"/>
    <child link="right_arm_fwk_fwa_050_frame_in"/>
  </joint>
  <link name="right_arm_fwk_fwa_050_frame_in">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!-- these meshes were exported in mm, so scale back to m -->
        <mesh filename="package://iai_adapters_description/meshes/fwk_fwa_050_simple.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="Grey"/>
    </visual>
  </link>
  <!-- Empty link just to get the frame out -->
  <link name="right_arm_fwk_fwa_050_frame_out"/>
  <!-- joint positioning the frame_out -->
  <joint name="right_arm_fwk_fwa_050_trans_frame_out" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.0141"/>
    <parent link="right_arm_fwk_fwa_050_frame_in"/>
    <child link="right_arm_fwk_fwa_050_frame_out"/>
    <axis xyz="0 0 0"/>
  </joint>
  <!-- The joint connecting us to the next part of the chain is in the next URDF -->
  <!-- Joint connecting the parent to our frame_in -->
  <joint name="right_arm_adapter_fwa050_wsg50_in_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.0"/>
    <parent link="right_arm_fwk_fwa_050_frame_out"/>
    <child link="right_arm_adapter_fwa050_wsg50_frame_in"/>
  </joint>
  <link name="right_arm_adapter_fwa050_wsg50_frame_in">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!-- these meshes were exported in mm, so scale back to m -->
        <mesh filename="package://iai_adapters_description/meshes/adapter_fwa050_wsg50.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="Grey"/>
    </visual>
  </link>
  <!-- Empty link just to get the frame out -->
  <link name="right_arm_adapter_fwa050_wsg50_frame_out"/>
  <!-- joint positioning the frame_out -->
  <joint name="right_arm_adapter_fwa050_wsg50_trans_frame_out" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.01"/>
    <parent link="right_arm_adapter_fwa050_wsg50_frame_in"/>
    <child link="right_arm_adapter_fwa050_wsg50_frame_out"/>
    <axis xyz="0 0 0"/>
  </joint>
  <!-- The joint connecting us to the next part of the chain is in the next URDF -->
  <joint name="right_gripper_anterior_gripper_joint" type="fixed">
    <origin rpy="0 0 3.14159265359" xyz="0 0 0"/>
    <parent link="right_arm_adapter_fwa050_wsg50_frame_out"/>
    <child link="right_gripper_base_link"/>
  </joint>
  <!-- BASE LINK -->
  <link name="right_gripper_base_link">
    <inertial>
      <mass value="0.25"/>
      <origin xyz="0 0 0"/>
      <!--inertia ixx="1.0" ixy="0.0" ixz="0.0"
               iyy="100.0" iyz="0.0"
               izz="1.0" /-->
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.0 0 0"/>
      <geometry>
        <mesh filename="package://iai_wsg_50_description/meshes/WSG50_110.stl" scale="1 1 1"/>
        <!--box size="0.146 0.05 0.0735"/-->
      </geometry>
      <material name="grey">
        <color rgba="0.5 0.5 0.5 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.0 0 0"/>
      <geometry>
        <!--box size="0.146 0.05 0.0735"/-->
        <mesh filename="package://iai_wsg_50_description/meshes/WSG50_110.stl" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="right_gripper_base_link">
    <material>Gazebo/Blue</material>
    <turnGravityOff>false</turnGravityOff>
  </gazebo>
  <!-- GRIPPER LEFT -->
  <joint name="right_gripper_base_gripper_left_joint" type="prismatic">
    <limit effort="1.0" lower="-0.055" upper="-0.0027" velocity="0.42"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <!--origin xyz="-0.0067 0 0.049" rpy="0 0 0" /-->
    <parent link="right_gripper_base_link"/>
    <child link="right_gripper_gripper_left_link"/>
    <dynamics damping="100" friction="100"/>
    <axis xyz="1 0 0"/>
    <!-- <limit effort="100" velocity="100"/> -->
  </joint>
  <transmission name="right_gripper_base_trans_left" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="right_gripper_base_motor_left"/>
    <joint name="right_gripper_base_gripper_left_joint"/>
    <mechanicalReduction>1</mechanicalReduction>
    <motorTorqueConstant>1</motorTorqueConstant>
  </transmission>
  <link name="right_gripper_gripper_left_link">
    <inertial>
      <mass value="0.1"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.0 0 0"/>
      <geometry>
        <mesh filename="package://iai_wsg_50_description/meshes/GUIDE_WSG50_110.stl" scale="0.001 0.001 0.001"/>
        <!--box size="0.0175 0.03 0.024"/-->
      </geometry>
      <material name="black">
        <color rgba="0 0 0 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!--box size="0.0175 0.03 0.024"/-->
        <mesh filename="package://iai_wsg_50_description/meshes/GUIDE_WSG50_110.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <contact_coefficients kd="1.0" kp="1000.0" mu="0"/>
  </link>
  <gazebo reference="right_gripper_gripper_left_link">
    <material>Gazebo/Blue</material>
    <turnGravityOff>false</turnGravityOff>
  </gazebo>
  <!-- LEFT FINGER -->
  <joint name="right_gripper_guide_joint_finger_left" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.023"/>
    <parent link="right_gripper_gripper_left_link"/>
    <child link="right_gripper_finger_left_link"/>
    <dynamics damping="100" friction="100"/>
    <axis xyz="1 0 0"/>
    <!-- <limit effort="100" velocity="100"/> -->
  </joint>
  <link name="right_gripper_finger_left_link">
    <inertial>
      <mass value="0.1"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.0 0 0"/>
      <geometry>
        <mesh filename="package://iai_wsg_50_description/meshes/WSG-FMF.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="black">
        <color rgba="0 0 0 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_wsg_50_description/meshes/WSG-FMF.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <contact_coefficients kd="1.0" kp="1000.0" mu="0"/>
  </link>
  <gazebo reference="right_gripper_finger_left">
    <material>Gazebo/Blue</material>
    <turnGravityOff>false</turnGravityOff>
  </gazebo>
  <!-- GRIPPER RIGHT -->
  <joint name="right_gripper_base_gripper_right_joint" type="prismatic">
    <limit effort="1.0" lower="0.0027" upper="0.055" velocity="0.42"/>
    <origin rpy="0 0 3.14159" xyz="0 0 0"/>
    <parent link="right_gripper_base_link"/>
    <child link="right_gripper_gripper_right_link"/>
    <axis xyz="-1 0 0"/>
    <dynamics damping="100" friction="100"/>
    <!-- <limit effort="100" velocity="100"/>-->
  </joint>
  <transmission name="right_gripper_base_trans_right" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="right_gripper_base_motor_right"/>
    <joint name="right_gripper_base_gripper_right_joint"/>
    <mechanicalReduction>1</mechanicalReduction>
    <motorTorqueConstant>1</motorTorqueConstant>
  </transmission>
  <link name="right_gripper_gripper_right_link">
    <inertial>
      <mass value="0.1"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.0 0 0"/>
      <geometry>
        <mesh filename="package://iai_wsg_50_description/meshes/GUIDE_WSG50_110.stl" scale="0.001 0.001 0.001"/>
        <!--box size="0.0175 0.03 0.024"/-->
      </geometry>
      <material name="black">
        <color rgba="0 0 0 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!--box size="0.0175 0.03 0.024"/-->
        <mesh filename="package://iai_wsg_50_description/meshes/GUIDE_WSG50_110.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <contact_coefficients kd="1.0" kp="1000.0" mu="0"/>
  </link>
  <gazebo reference="right_gripper_gripper_right_link">
    <material>Gazebo/Blue</material>
    <turnGravityOff>false</turnGravityOff>
  </gazebo>
  <!-- RIGHT FINGER -->
  <joint name="right_gripper_guide_joint_finger_right" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.023"/>
    <parent link="right_gripper_gripper_right_link"/>
    <child link="right_gripper_finger_right_link"/>
  </joint>
  <link name="right_gripper_finger_right_link">
    <inertial>
      <mass value="0.1"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.0 0 0"/>
      <geometry>
        <mesh filename="package://iai_wsg_50_description/meshes/WSG-FMF.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="black">
        <color rgba="0 0 0 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://iai_wsg_50_description/meshes/WSG-FMF.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <contact_coefficients kd="1.0" kp="1000.0" mu="0"/>
  </link>
  <gazebo reference="right_gripper_finger_right">
    <material>Gazebo/Blue</material>
    <turnGravityOff>false</turnGravityOff>
  </gazebo>
  <link name="right_gripper_tool_frame"/>
  <joint name="right_gripper_tool_frame_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.154"/>
    <parent link="right_gripper_base_link"/>
    <child link="right_gripper_tool_frame"/>
  </joint>

  <joint name="gazebo_cam_joint" type="fixed">
    <origin rpy="1.57079632679 -1.57079632679 0.0" xyz="0.0 0.0 0.0"/>
    <parent link="head_mount_kinect2_rgb_optical_frame"/>
    <child link="head_mount_gazebo_cam_frame"/>
  </joint>
  <link name="head_mount_gazebo_cam_frame" />

</robot>
